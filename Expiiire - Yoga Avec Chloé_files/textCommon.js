define("textCommon/bi/events.json",[],function(){return{UNSAFE_HTML_IN_TEXT_COMPONENT:{eventId:369,adapter:"ugc-viewer",params:{filtered_content:"filtered_content",component_id:"component_id",component_type:"component_type"}}}});define("textCommon/bi/events",["utils","textCommon/bi/events.json"],function(a,b){"use strict";var c=a.logger;c.register("core","event",b);return b});define("textCommon/utils/filterHtmlString",["lodash","xss","experiment","textCommon/bi/events"],function(a,b,c,d){"use strict";if(!b){return a.identity}var e=["style","class","dir","wix-comp"];var f={iframe:["frameborder","height","width","src","marginheight","marginwidth","name","scrolling","longdesc"].concat(e)};function g(){var c={strike:[],hatul:[]};var d=["color","background-color","font-size","font-family","font-style","text-decoration","line-height","text-shadow","direction"];a.assign(b.whiteList,c);b.whiteList.a.push("data-anchor");b.whiteList.a.push("dataquery");a.forOwn(b.whiteList,function a(b){b.push.apply(b,e)});a.forEach(d,function a(c){b.cssFilter.options.whiteList[c]=true})}g();function h(a,c,d,e){return b.safeAttrValue(a,c,d,e)}function i(b,c){var d=a.find(b,c);if(d){d.count++}else{b.push(a.assign(c,{count:1}))}}function j(a,b){return a.toLowerCase()==="style"&&b===""}function k(a,b,c,e){e(d.UNSAFE_HTML_IN_TEXT_COMPONENT,{filtered_content:JSON.stringify(a),component_id:b,component_type:c})}function l(b){return a.some(a.values(b),a.size)}return function d(e,g,m,n,o){var p={tags:[],attrs:[],attrValues:[]};if(g){a.assign(b.whiteList,f)}else{delete b.whiteList.iframe}var q=b(e,{stripIgnoreTagBody:true,onTag:function(a,b,c){if(!c.isWhite&&!c.isClosing){var d={tagName:a};i(p.tags,d)}},onIgnoreTag:function a(b){var c={tagName:b};i(p.tags,c)},onIgnoreTagAttr:function a(b,c){var d={tagName:b,attrName:c};i(p.attrs,d)},safeAttrValue:function a(b,c,d,e){var f=h(b,c,d,e);if(f){return f}else if(!j(c,d)){var g={tagName:b,attrName:c,attrValue:d};i(p.attrValues,g)}return""}});if(c.isOpen("sv_textCompFilter")&&l(p)){k(p,n,m,o)}if(c.isOpen("sv_safeHtmlString")){return q}return e}});define("textCommon/mixins/textCompMixin",["lodash","react","core","santaProps","textCommon/utils/filterHtmlString"],function(a,b,c,d,e){"use strict";return{propTypes:{reportBI:d.Types.reportBI,id:d.Types.Component.id.isRequired,skin:d.Types.Component.skin.isRequired,style:d.Types.Component.style.isRequired,structure:d.Types.Component.structure.isRequired,title:b.PropTypes.string},mixins:[c.compMixins.skinBasedComp],componentWillMount:function(){this.updateHTML(this.props)},updateHTML:function(a){this._componentHtml=e(a.compData.text||"",this.allowIframes,this.constructor.displayName,this.props.id,this.props.reportBI);this.convertCompDataTextToHTML(a)},componentWillReceiveProps:function(a){this.updateHTML(a)},getRootStyle:function(b){var c=a.clone(b||{});if((c["overflow-y"]||c.overflowY)!=="hidden"){c.height="auto"}return c},getSkinProperties:function(){this.lastScale=a.get(this,"props.structure.layout.scale")||1;var b=this.props.skin;var c={"":{style:this.getRootStyle(this.props.style)}};var d;if(b==="wysiwyg.viewer.skins.WRichTextSkin"||b==="wysiwyg.viewer.skins.WRichTextClickableSkin"){d=c.richTextContainer={}}else{d=c[""]}d.dangerouslySetInnerHTML={__html:this._componentHtml||""};if(this.props.title){c[""].title=this.props.title}var e=a.get(this.props,["compProp","overrideAlignment"]);if(e){d.className=this.classSet(a.zipObject(["override-"+e],[true]))}return c}}});define("textCommon/mixins/textScaleMixin",["lodash","skins","fonts","santaProps","siteUtils","core"],function(a,b,c,d,e,f){"use strict";var g=c.fontUtils;function h(a,b){return e.mobileUtils.convertFontSizeToMobile(a,b)}function i(){var c=b.skins[this.props.skin]&&b.skins[this.props.skin].exports;var d=a.find(c,function(b){var c=b.skin;return!a.isUndefined(this.getParamFromSkin("fnt",c).value)},this);return d&&this.getParamFromSkin("fnt",d.skin).value}return{mixins:[f.compMixins.skinInfo],propTypes:{structure:d.Types.Component.structure,compTheme:d.Types.Component.theme,skin:d.Types.Component.skin,isMobileView:d.Types.isMobileView,fontsMap:d.Types.Fonts.fontsMap},componentWillReceiveProps:function(){this.lastScale=a.get(this,"props.structure.layout.scale")||1},fontGetter:function(a){var b=a.split("_")[1];return this.props.fontsMap[b]},getFontSize:function(){var a={};if(this.props.isMobileView){var b=this.getDesktopFontSize();if(b){a.fontSize=h(b,this.props.structure.layout.scale)+"px"}}return a},getDesktopFontSize:function(){var c=this.props.compTheme;var d=a.get(c,["style","properties","fnt"])||a.get(b,["skins",this.props.skin,"paramsDefaults","fnt"])||i.call(this);if(d){var e=this.fontGetter(d)||d;return parseInt(g.parseFontStr(e).size,10)}}}});define("textCommon/mixins/baseTextInput",["lodash","react","santaProps","core"],function(a,b,c,d){"use strict";var e=d.compMixins;var f={style:{display:"none"}};function g(a){return{$label:a.compProp.label?"hasLabel":"noLabel"}}function h(){var b=this.props.compProp;var c=this.props.compData;var d={type:c.textType,name:c.name||this.props.structure.nickname,value:this.state.value,onChange:this._handleChange,onBlur:this._handleBlur,onFocus:this._handleFocus,onClick:this._handleClick,onKeyUp:this._handleKeyUp,disabled:b.isDisabled,required:b.required,readOnly:b.readOnly,placeholder:b.placeholder,tabIndex:b.tabIndex};if(d.type==="number"){a.assign(d,{min:c.min,max:c.max})}if(c.pattern){a.assign(d,{pattern:c.pattern})}if(c.maxLength){a.assign(d,{maxLength:c.maxLength})}if(b.autoComplete&&d.type!=="password"){d.autoComplete="on"}return d}var i=function(b){return{valid:a.get(b,"valid",true)}};var j={mixins:[e.skinBasedComp,e.runTimeCompData,e.compStateMixin(i)],propTypes:{compData:c.Types.Component.compData.isRequired,compProp:c.Types.Component.compProp.isRequired,structure:c.Types.Component.structure.isRequired,isValid:b.PropTypes.bool,isPreset:b.PropTypes.bool,onChange:b.PropTypes.func,message:b.PropTypes.string},statics:{behaviors:{change:{methodName:"setValidateState"}}},getInitialState:function(){return a.assign(g(this.props),{valid:!(this.props.isValid===false),value:this.props.compData.value})},componentWillReceiveProps:function(b){var c=g(b);if(a.has(b.compData,"value")&&b.compData.value!==this.state.value){c.value=b.compData.value}this.setState(c)},_handleClick:function(a){if(this.props.isPreset){a.target.select()}},setValidateState:function(){this.setState({valid:!!(this.validate()==="valid")})},validate:function(){var a=this.refs.input;var b=this.props.compProp.required?this.state.value.length===0:false;this.handleAction("validate");return!b&&a.validity&&a.validity.valid?"valid":"invalid"},_handleChange:function(a){var b=a.target.value;this.setState({value:b},function(){this.updateData({value:b})}.bind(this));this.latestChangeEvent=a},_handleBlur:function(a){if(this.props.onChange){this.props.onChange(a)}this.handleAction("blur",a);if(this.latestChangeEvent){this.handleAction("change",this.latestChangeEvent);this.setValidateState();this.latestChangeEvent=null}},_handleFocus:function(a){this.handleAction("focus",a)},_handleKeyUp:function(a){this.handleAction("keyPress",a)},getBaseTextInputSkinProperties:function(){var a=this.props.compProp;return{label:a.label?{children:a.label}:f,input:h.call(this),message:this.props.message?{children:this.props.message,style:{whiteSpace:"normal"}}:f}}};return j});define("textCommon/utils/textTransforms",["lodash","siteUtils","coreUtils","color"],function(a,b,c,d){"use strict";var e=c.cssUtils;if(typeof window!=="undefined"){window.addEventListener("message",function(b){if(b.data==="show-always"){window.showAlways=!window.showAlways;a.forEach(window.document.getElementsByClassName("text-info-n47t"),function(a){if(window.showAlways){a.classList.add("show-always")}else{a.classList.remove("show-always")}})}})}function f(a,b){var c=a.hexString()!=="#000000"?a.clone():new d("#121212");c.lightness(c.hslArray()[2]*(b||1));return c}function g(a){var b=parseFloat(a);if(!isNaN(b)){return b}}function h(b){if(!b){return}return a.first(b.split(","))}function i(a){if(!a){return}return new d(e.normalizeColorStr(a))}function j(a,c,d){if(!c.fontSize){return}if(c.fontSize%1!==0){return}if(!a.style.fontSize&&!l(a,d)){return}var e=parseFloat(d.scale);var f=Math.round(b.mobileUtils.convertFontSizeToMobile(c.fontSize,e));a.style.fontSize=f+"px"}function k(a,b,c){if(!b.color){return}var d=l(a,c);if(!a.style.color&&!o(a,d,c)){return}var e=parseFloat(c.brightness);var g=f(b.color,e);a.style.color=g.hslString()}function l(a,b){var c=/(?:\s|^)(font_\d+)(?:\s|$)/g.exec(a.className);if(!c){return}var d=b.fontGetter&&b.fontGetter(c[1]);if(d){return e.parseFontStr(d)}}function m(a){var b=/(?:\s|^)(color_\d+)(?:\s|$)/g.exec(a.className);if(b){return b[1]}}function n(b){var c=/^{(color_\d+)}$/.exec(a.get(b,"color"));if(c){return c[1]}}function o(a,b,c){var d=m(a)||n(b);if(!d){return}var e=c.colorGetter&&c.colorGetter(d);if(e){return e}}function p(b,c){var d=l(b,c);var e=o(b,d,c);return{fontSize:g(a.get(d,"size")),fontName:h(a.get(d,"family")),color:i(e)}}function q(b){var c=a(b.style).pick(["fontSize","fontFamily","color"]).omit(a.isEmpty).value();return{fontSize:g(c.fontSize),fontName:h(c.fontFamily),color:i(c.color)}}function r(b,c,d,e){var f=a.defaults({},q(b),p(b,e),c);a.forEach(b.children,a.partial(r,a,f,d,e));a.invoke(d,"call",null,b,f)}function s(a,b,c){var d={characterCount:a.textContent.length};r(a,d,b,c)}function t(b){var c=[];if(b.scale){c.push(a.partial(j,a,a,b))}if(b.brightness&&parseFloat(b.brightness)!==1){c.push(a.partial(k,a,a,b))}return c}function u(){var a=window.document.createDocumentFragment();return a.appendChild(window.document.createElement("div"))}return{applyMobileAdjustments:function(b,c){var d=t(c);if(d.length===0){return b}var e=u();e.innerHTML=b;a.forEach(e.children,a.partial(s,a,d,c));return e.innerHTML}}});define("textCommon/utils/textComponentsUtils",["lodash","coreUtils","textCommon/utils/textTransforms","experiment"],function(a,b,c,d){"use strict";var e=b.anchorTagsGenerator;function f(b,c,d,e,f){var g=a.transform(c,function(a,b){a["#"+b.id]=b},{});return b.replace(/<a ([^>]*)dataquery="([^"]+)"([^>]*)>/g,function(b,c,h,i){var j=e?d(g[h],e,f):d(g[h]);return"<a "+c+a.map(j,function(a,b){return b+'="'+a+'"'}).join(" ")+i+">"})}function g(a,b){if(!b.isMobileView){return a}a=c.applyMobileAdjustments(a,b);return a}function h(a){var b=e.getIncludedPatterns(d,a.isMobileView);return e.generateAnchorsInHtml(a.htmlContent,b)}return{convertDataQueryLinksIntoHtmlAnchors:f,mobileTextTransformIfNeeded:g,createImpliedLinks:h}});define("textCommon",["textCommon/mixins/textCompMixin","textCommon/mixins/textScaleMixin","textCommon/mixins/baseTextInput","textCommon/utils/textComponentsUtils"],function(a,b,c,d){"use strict";return{textCompMixin:a,textScaleMixin:b,textComponentsUtils:d,baseTextInput:c}});